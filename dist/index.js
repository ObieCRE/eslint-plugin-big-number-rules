/*
 * eslint-plugin-big-number-rules
 * v1.8.3
 * https://github.com/shuckster/eslint-plugin-big-number-rules
 * License: MIT
 */
"use strict";var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,r)=>{for(var n in r)e(t,n,{get:r[n],enumerable:!0})},s={};o(s,{against:()=>A,allOf:()=>q,anyOf:()=>P,cata:()=>ae,defined:()=>z,empty:()=>H,endsWith:()=>te,every:()=>L,falsy:()=>se,firstOf:()=>W,gt:()=>K,gte:()=>X,hasOwn:()=>ie,inRange:()=>Z,includedIn:()=>ne,includes:()=>re,instanceOf:()=>T,isArray:()=>E,isDate:()=>S,isFunction:()=>I,isNumber:()=>v,isPojo:()=>w,isRegExp:()=>C,isString:()=>j,lastOf:()=>V,lt:()=>Q,lte:()=>Y,match:()=>R,not:()=>U,otherwise:()=>B,pluck:()=>M,some:()=>J,spread:()=>ce,startsWith:()=>ee,truthy:()=>oe,when:()=>F});var c,l=(c=s,((n,a,o,s)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let c of r(a))!i.call(n,c)&&c!==o&&e(n,c,{get:()=>a[c],enumerable:!(s=t(a,c))||s.enumerable});return n})(e({},"__esModule",{value:!0}),c)),u={};o(u,{instanceOf:()=>f,isArguments:()=>d,isArray:()=>y,isDate:()=>h,isFunction:()=>b,isNumber:()=>x,isObject:()=>O,isPojo:()=>N,isRegExp:()=>_,isString:()=>$});var p=Object.prototype,m=p.toString,g=e=>t=>typeof t===e,f=e=>t=>t instanceof e,{isArray:y}=Array,d=e=>"[object Arguments]"===m.call(e),h=e=>f(Date)(e)&&!isNaN(e),b=g("function"),$=g("string"),x=e=>e==e&&g("number")(e),O=e=>null!==e&&g("object")(e),_=f(RegExp),N=e=>!(null===e||!O(e)||d(e))&&Object.getPrototypeOf(e)===p,{isArray:E,isDate:S,isFunction:I,isNumber:v}=u,{isPojo:w,isRegExp:C,isString:j,instanceOf:T}=u;function R(e){return(...t)=>A(...t)(e)}var A=(...e)=>{let t;return r=>e.find((e=>{let n=e(r),{matched:i,value:a}=n||{};return[i,a].every(I)?i(r)&&(t=a(r),!0):n&&(t=n)}))&&t},B=e=>t=>({matched:()=>!0,value:()=>I(e)?e(t):e}),D=e=>t=>r=>({matched:()=>G(e,r,(e=>r=e)),value:()=>I(t)?j(r)&&C(e)?t(...k(r.match(e))):t(r):t}),F=(...e)=>{if(1===e.length){let[t]=e;return D(t)}if(2===e.length){let[t,r]=e;return D(t)(r)}if(e.length>2){let t=e.slice(-1)[0],r=e.slice(0,-1);return D(q(r))(t)}throw new Error("expected 1 or 2 arguments")},k=e=>{let{groups:t}=e;return t?[t,e]:[e]},G=(e,t,r)=>w(e)?Object.keys(e).every((n=>G(e[n],null==t?void 0:t[n],r))):E(e)?E(t)&&e.length===t.length&&e.every(((e,n)=>G(e,null==t?void 0:t[n],r))):I(e)?e(t,r):j(t)&&C(e)?e.test(t):e===t||[e,t].every(Number.isNaN),M=(...e)=>(t,r)=>!(0!==e.length&&!(I(e[0])?e[0](t):G(e[0],t,r)))&&(r(t),!0),U=e=>(t,r)=>!G(e,t,r),P=(...e)=>(t,r)=>e.flat().some((e=>G(e,t,r))),q=(...e)=>(t,r)=>e.flat().every((e=>G(e,t,r))),L=e=>pe((t=>t.every((t=>G(e,t))))),J=e=>pe((t=>t.some((t=>G(e,t))))),W=(...e)=>me(((t,r)=>e.length<=t.length&&G(e,t.slice(0,e.length),r))),V=(...e)=>me(((t,r)=>e.length<=t.length&&G(e,t.slice(t.length-e.length),r))),H=e=>e!=e||!e&&0!==e&&!1!==e||E(e)&&!e.length||w(e)&&!Object.keys(e).length,z=e=>!H(e),K=e=>ue((t=>t>e)),Q=e=>ue((t=>t<e)),X=e=>ue((t=>t>=e)),Y=e=>ue((t=>t<=e)),Z=(e,t)=>ue((r=>r>=Math.min(e,t)&&r<=Math.max(e,t))),ee=e=>le((t=>t.startsWith(e))),te=e=>le((t=>t.endsWith(e))),re=e=>me((t=>t.includes(e))),ne=P,ie=(...e)=>t=>w(t)&&(([e,t])=>e.length&&e.every((e=>t.includes(e))))([e.flat(),Object.keys(t)]),ae=e=>{var t=e,{getValue:r}=t,o=((e,t)=>{var r={};for(var o in e)i.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&n)for(var o of n(e))t.indexOf(o)<0&&a.call(e,o)&&(r[o]=e[o]);return r})(t,["getValue"]);return Object.entries(o).reduce(((e,[t,n])=>Object.assign(e,{[t]:e=>t=>({matched:()=>n(t),value:()=>I(e)?e(r(t)):e})})),{})},oe=e=>!!e,se=e=>!e,ce=e=>new Proxy({},{get:()=>e}),le=e=>t=>j(t)&&e(t),ue=e=>t=>v(t)&&e(t),pe=e=>(t,r)=>E(t)&&e(t,r),me=e=>(t,r)=>(E(t)||j(t))&&e(t,r);const{isPojo:ge}=l;function fe(e="construct",t="BigNumber"){return r=>{const{settings:n}=r,i=n["big-number-rules"]?.[e]??t;return ge(t)&&ge(i)&&t!==i?{...t,...i}:i}}const ye=fe("construct","BigNumber"),de=fe("importDeclaration","__IGNORE__"),he=fe("importSpecifier","__IGNORE__");var be={makeSettingGetter:fe,isPojo:ge,getConstruct:ye,getImportDeclaration:de,getImportSpecifier:he};const $e=l,{match:xe,against:Oe,when:_e,otherwise:Ne}=$e,{pluck:Ee,isString:Se,anyOf:Ie}=$e,{getConstruct:ve,getImportDeclaration:we,getImportSpecifier:Ce}=be;function je(e){return e}const Te=e=>(e?.specifiers||[]).map(Oe(_e({type:Ie("ImportDefaultSpecifier","ImportSpecifier"),local:{type:"Identifier",name:Ee(Se)}},je),Ne(null))).filter(Se);function Re(e){return"Identifier"===e?.type&&"CallExpression"===e?.parent?.type&&e?.parent?.callee===e}function Ae(e){return(t,r)=>{if(Re(r))return!1;const n=function(e){return xe(e)(_e({type:"Identifier",parent:{type:"MemberExpression",object:Ie({type:"Identifier",name:Se},{type:"CallExpression",callee:{name:Se}})}})((({parent:{object:e}})=>xe(e)(_e({type:"Identifier"})((e=>e.name)),_e({type:"CallExpression"})((e=>e.callee.name)),Ne(null)))),Ne(null))}(r);if(null===n)return!1;return e.replace("__CONSTRUCT__",ve(t))===n}}const Be=Ae("__CONSTRUCT__");var De={IdentifierIsAlreadyBigNumberMethod:Be,makeIdentifierMembershipDetector:Ae,makeGlobalIdentifierFixer:function(e){const t={},r=[];return Object.keys(e).forEach((e=>{if(e.includes(".")){const[r,n]=e.split(".");t[n]=Ae(r)}else r.push(e)})),n=>i=>{if(Be(n,i))return;const a=n.getSource(i);if(r.includes(i.name)&&Re(i))return void n.report({node:i,message:`is '${a}' a financial calculation?`,fix:t=>{const r=e[i.name];return t.replaceText(i,r(n))}});const o=(s=t,c=i.name,Object.prototype.hasOwnProperty.call(s,c)&&t[i.name]);var s,c;"function"==typeof o&&o(n,i)&&n.report({node:i.parent,message:`is '${a}' a financial calculation?`,fix:t=>{const r=e[i.name];return t.replaceText(i.parent,r(n))}})}},withImportDeclaration:function(e,t){const r=we(e);return"__IGNORE__"===r?t:n=>{const[i]=e.getAncestors(),a=i?.body?.find((e=>"ImportDeclaration"===e?.type&&e?.source?.value===r));if(a){const r=["__IGNORE__"].concat(Te(a)),i=Ce(e);return r.includes(i)?t(n):void 0}}},StringFromArguments:function(e){return t=>t.arguments.map((t=>e.getSource(t))).join(", ")}};const{match:Fe,when:ke,against:Ge,otherwise:Me,not:Ue,allOf:Pe,anyOf:qe}=l,{makeSettingGetter:Le,getConstruct:Je}=be,{withImportDeclaration:We}=De,Ve=e=>Array.isArray(e)&&[3,4].includes(e.length),He=Le("arithmetic",{"+":"plus","-":"minus","/":"dividedBy","*":"multipliedBy","**":"exponentiatedBy","%":"modulo"}),ze=Le("comparison",{"<":"isLessThan","<=":"isLessThanOrEqualTo","===":"isEqualTo","==":"isEqualTo","!==":["__NEGATION__","${L}","isEqualTo","${R}"],"!=":["__NEGATION__","${L}","isEqualTo","${R}"],">=":"isGreaterThanOrEqualTo",">":"isGreaterThan"}),Ke=Le("bitwise",{">>":"shiftedBy",">>>":"shiftedBy","<<":["${L}","shiftedBy","-${R}"]}),Qe=Le("sum","sum"),Xe=Le("supportsSum",!0),Ye=Le("supportsBitwise",!0),Ze=[];function et(e){const t=Je(e),r=Ye(e),n={...He(e),...ze(e)},i=qe(Object.keys(n)),a=Ke(e),o=qe(Object.keys(a)),s={...n,...a},c=Ue(Pe(ot,st)),l=u;return Ge(ke({type:"BinaryExpression",operator:i,left:c,right:c})(l),ke({type:"BinaryExpression",operator:o,left:c,right:c})((function(n){if(r)return u(n);const i=e.getSource(n);e.report({node:n,message:`is '${i}' a financial calculation? If so, bitwise methods are not supported by ${t}\n`})})));function u(r){const n=e.getSource(r),i=Xe(e)&&rt(r),a=function(e,t){let r=t;for(;!at(e,r);){if(!it(r))return!1;r=r.callee.object}return!0}(e,r.left);Ze.push({node:r,original:n,summable:i&&!a,report:{node:r,message:`is '${n}' a financial calculation?`,fix:n=>{const{operator:i}=r,o=e.getSource(r.left),c=e.getSource(r.right),[l,u,p,m]=Fe(s[i])(ke(Ve)((e=>{const r=e.map((e=>e.replace("__CONSTRUCT__",t).replace("${L}",o).replace("${R}",c)));3===r.length&&r.unshift("");const[n,...i]=r;return["__NEGATION__"===n,...i]})),Me((e=>["",o,e,c]))),g=l?"!":"";return n.replaceText(r,a?`${g}${o}.${p}(${m})`:`${g}${t}(${u}).${p}(${m})`)}}})}}function tt(e){return t=>{if(r=t,!Ze.find((({node:e})=>e===r)))return;var r;const{node:n,original:i,summable:a,report:o}=Ze.pop();a?function(){if(!Ze.length)return!1;return Ze[Ze.length-1]?.summable??!1}()||e.report({node:n,message:`is '${i}' a financial calculation?`,fix:t=>{const r=nt(e,n).join(", ");return t.replaceText(n,`${Je(e)}.${Qe(e)}(${r})`)}}):e.report(o)}}function rt(e){try{if("BinaryExpression"!==e.type)return!0;if("+"!==e.operator)throw new Error("not a +");return rt(e.left)&&rt(e.right)}catch(e){return!1}}function nt(e,t){return"BinaryExpression"!==t.type?[e.getSource(t)]:[...nt(e,t.left),...nt(e,t.right)].flat()}function it(e){return"CallExpression"===e?.type&&"MemberExpression"===e?.callee?.type}function at(e,t){return function(e,t){return"CallExpression"===t?.type&&"Identifier"===t?.callee?.type&&t?.callee?.name===Je(e)}(e,t)||function(e,t){return it(t)&&"Identifier"===t?.callee?.object?.type&&t?.callee?.object?.name===Je(e)&&"Identifier"===t?.callee?.property?.type&&t?.callee?.property?.name===Qe(e)}(e,t)}function ot(e){const{type:t,value:r}=e||{};return"Literal"===t&&isNaN(r)}function st(e){return"MemberExpression"===e?.type&&"Identifier"===e?.property?.type&&"length"===e?.property?.name}var ct={create:e=>({BinaryExpression:We(e,et(e)),"BinaryExpression:exit":We(e,tt(e))}),meta:{category:"Financial, Currency",description:"Replace JavaScript arithmetic with BigNumber methods",fixable:"code"}};const{against:lt,when:ut,not:pt,match:mt,otherwise:gt,anyOf:ft}=l,{makeSettingGetter:yt,getConstruct:dt}=be,{withImportDeclaration:ht}=De,bt={"+=":"plus","-=":"minus","/=":"dividedBy","*=":"multipliedBy","**=":"exponentiatedBy","%=":"modulo"},$t={">>=":"shiftedBy",">>>=":"shiftedBy","<<=":["${L}","shiftedBy","-${R}"]},xt=e=>Array.isArray(e)&&3===e.length,Ot=yt("assignment",{...bt,...$t}),_t=yt("supportsBitwise",!0);function Nt(e){const t=dt(e),r=Ot(e),n=ft(Object.keys(bt)),i=ft(Object.keys($t)),a=_t(e),o=pt({type:"Identifier",name:t}),s=c;return lt(ut({type:"AssignmentExpression",operator:n,left:o})(s),ut({type:"AssignmentExpression",operator:i,left:o})((function(r){if(a)return c(r);const n=e.getSource(r);e.report({node:r,message:`is '${n}' a financial calculation? If so, bitwise methods are not supported by ${t}\n`})})));function c(n){const i=e.getSource(n);e.report({node:n,message:`is '${i}' a financial calculation?`,fix:i=>{const a=e.getSource(n.left),o=e.getSource(n.right),[s,c,l]=mt(r[n.operator])(ut(xt)((e=>e.map((e=>e.replace("__CONSTRUCT__",t).replace("${L}",a).replace("${R}",o))))),gt((e=>[a,e,o])));return i.replaceText(n,`${s} = ${t}(${s}).${c}(${l})`)}})}}var Et={create:e=>({AssignmentExpression:ht(e,Nt(e))}),meta:{category:"Financial, Currency",description:"Replace JavaScript assignment-expressions with BigNumber equivalents",fixable:"code"}};const{against:St,when:It}=l,{getConstruct:vt}=be,{withImportDeclaration:wt,StringFromArguments:Ct}=De;function jt(e){return St(It({type:"CallExpression",callee:{type:"Identifier",name:"isNaN"}})(t),It({type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:"Number"},property:{type:"Identifier",name:"isNaN"}}})(t));function t(t){const r=e.getSource(t);e.report({node:t,message:`is '${r}' a financial calculation?`,fix:r=>{const n=vt(e),i=Ct(e)(t);return r.replaceText(t,`${n}(${i}).isNaN()`)}})}}var Tt={create:e=>({CallExpression:wt(e,jt(e))}),meta:{category:"Financial, Currency",description:"Replace isNaN with BigNumber equivalent",fixable:"code"}};const{match:Rt,when:At,against:Bt,otherwise:Dt,anyOf:Ft}=l,{makeSettingGetter:kt,getConstruct:Gt}=be,{withImportDeclaration:Mt,StringFromArguments:Ut}=De,Pt=kt("math",{min:"minimum",max:"maximum",random:"random",abs:"absoluteValue",sign:["__CONSTRUCT__(${A}).comparedTo(0)"],sqrt:"squareRoot"});function qt(e){const t=Pt(e),r=Ft(Object.keys(t));return Bt(At({type:"CallExpression",callee:{type:"MemberExpression",object:{name:"Math"},property:{name:r}}})((function(r){const n=e.getSource(r);e.report({node:r,message:`is '${n}' a financial calculation?`,fix:n=>{const i=Gt(e),a=r.callee.property.name,o=Ut(e)(r);return n.replaceText(r,Rt(t[a])(At({length:1})((e=>e[0].replace("__CONSTRUCT__",i).replace("${A}",o))),At({length:2})((e=>{const t=e[0],r=e.slice(1).map((e=>e.replace("${A}",o)));return`${i}.${t}(${r})`})),Dt((e=>`${i}.${e}(${o})`))))}})})))}var Lt={create:e=>({CallExpression:Mt(e,qt(e))}),meta:{category:"Financial, Currency",description:"Replace JavaScript Math methods with BigNumber equivalents",fixable:"code"}};const{match:Jt,when:Wt,against:Vt,otherwise:Ht,anyOf:zt}=l,{makeSettingGetter:Kt,getConstruct:Qt}=be,{IdentifierIsAlreadyBigNumberMethod:Xt,withImportDeclaration:Yt,StringFromArguments:Zt}=De,er=Kt("number",{parseFloat:["__CONSTRUCT__(${A})"],toExponential:"toExponential",toFixed:"decimalPlaces",toPrecision:"toPrecision",toString:"toString"});function tr(e){const t=er(e),r=zt(Object.keys(t));return Vt(Wt({type:"CallExpression",callee:{type:"MemberExpression",property:{type:"Identifier",name:r}}})((function(r){const{property:n,object:i}=r.callee;if(Xt(e,n))return;const a=e.getSource(r);e.report({node:r,message:`is '${a}' a financial calculation?`,fix:a=>{const o=Qt(e),s=e.getSource(i),c=Zt(e)(r);return a.replaceText(r,Jt({node:r,method:t[n.name]})(Wt({node:{callee:{object:{name:"Number"}}},method:Array.isArray})((({method:e})=>e[0].replace("__CONSTRUCT__",o).replace("${O}",s).replace("${A}",c))),Ht((({method:e})=>`${o}(${s}).${e}(${c})`))))}})})))}var rr={create:e=>({CallExpression:Yt(e,tr(e))}),meta:{category:"Financial, Currency",description:"Replace JavaScript Number.prototype methods with BigNumber equivalents",fixable:"code"}};const{getConstruct:nr}=be,{makeGlobalIdentifierFixer:ir,withImportDeclaration:ar}=De,or=ir({parseFloat:e=>nr(e)});var sr={create:e=>({Identifier:ar(e,or(e))}),meta:{category:"Financial, Currency",description:"Replace parseFloat with BigNumber equivalent",fixable:"code"}};const{against:cr,when:lr,match:ur,otherwise:pr,anyOf:mr}=l,{makeSettingGetter:gr,getConstruct:fr}=be,{withImportDeclaration:yr}=De,dr={floor:"BigNumber.set({\n  ROUNDING_MODE: BigNumber.ROUND_FLOOR\n})",ceil:"BigNumber.set({\n  ROUNDING_MODE: BigNumber.ROUND_CEIL\n})",round:"BigNumber.set({\n  ROUNDING_MODE: BigNumber.ROUND_HALF_EVEN\n})"},hr=gr("supportsRound",!1),br=gr("rounding",dr);function $r(e){const t=mr(Object.keys(dr)),r=br(e),n=hr(e);return cr(lr({type:"CallExpression",callee:{type:"MemberExpression",object:{name:"Math"},property:{name:t}}})((function(t){const i=e.getSource(t),a=t.callee.property.name;if(!n)return void e.report({node:t,message:`is '${i}' a financial calculation? If so, use the global constructor setting:\n\n${r[a]}\n`});e.report({node:t,message:`is '${i}' a financial calculation?`,fix:n=>{const i=fr(e),o=r[a],s=t.arguments.map((t=>e.getSource(t))).join(", ");return n.replaceText(t,ur(o)(lr({length:1})((e=>e[0].replace("__CONSTRUCT__",i).replace("${A}",s))),lr({length:2})((e=>{const t=e[0],r=e.slice(1).map((e=>e.replace("${A}",s)));return`${i}.${t}(${r})`})),pr((e=>`${i}.${e}(${s})`))))}})})))}function xr(e){const t=br(e),r=hr(e);return cr(lr({type:"UnaryExpression",operator:"~",argument:{operator:"~"}})((function(n){const i=e.getSource(n),a=t.floor;if(!r)return void e.report({node:n,message:`is '${i}' a financial calculation? If so, use the global constructor setting:\n\n${a}\n`});e.report({node:n,message:`is '${i}' a financial calculation?`,fix:t=>{const r=e.getSource(n?.argument?.argument),i=fr(e);return t.replaceText(n,ur(a)(lr({length:1})((e=>e[0].replace("__CONSTRUCT__",i).replace("${A}",r))),lr({length:2})((e=>{const t=e[0],n=e.slice(1).map((e=>e.replace("${A}",r)));return`${i}.${t}(${n})`})),pr((e=>`${i}.${e}(${r})`))))}})})))}var Or={rules:{arithmetic:ct,assignment:Et,isNaN:Tt,math:Lt,number:rr,parseFloat:sr,rounding:{create:e=>({CallExpression:yr(e,$r(e)),UnaryExpression:yr(e,xr(e))}),meta:{category:"Financial, Currency",description:"Warn against using JavaScript Math.round|ceil|floor methods, or offer replacements",fixable:"code"}}},configs:{recommended:{rules:{"big-number-rules/arithmetic":"warn","big-number-rules/assignment":"warn","big-number-rules/isNaN":"warn","big-number-rules/math":"warn","big-number-rules/number":"warn","big-number-rules/parseFloat":"warn","big-number-rules/rounding":"warn"}}}};module.exports=Or;
